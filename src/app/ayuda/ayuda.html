<div class="modal-overlay" (click)="onClose()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2 class="modal-title">Solicitar Ayuda</h2>
      <button class="close-button" (click)="onClose()">âœ•</button>
    </div>

    <div class="task-summary">
      <p class="summary-title">{{ task.nombre }}</p>
      <p class="summary-subject">{{ task.materia }}</p>
      <p class="summary-grade">CalificaciÃ³n actual: {{ task.calificacion }}%</p>
    </div>

    <form (ngSubmit)="onSubmit($event)">
      <div class="form-group">
        <label class="form-label">Tipo de ayuda que necesitas</label>
        <select 
          class="form-select"
          [(ngModel)]="tipoAyuda"
          name="tipoAyuda"
          required>
          <option *ngFor="let tipo of tiposAyuda" [value]="tipo.value">
            {{ tipo.label }}
          </option>
        </select>
      </div>

      <div class="form-group">
        <label class="form-label">Describe tu duda o problema</label>
        <textarea
          class="form-textarea"
          [(ngModel)]="mensaje"
          name="mensaje"
          rows="5"
          placeholder="Explica en quÃ© necesitas ayuda..."
          required></textarea>
      </div>

      <div class="form-actions">
        <button type="button" class="btn-cancel" (click)="onClose()" [disabled]="enviandoIA">
          Cancelar
        </button>
        <button type="submit" class="btn-submit" [disabled]="enviandoIA" [style.background]="enviandoIA ? 'linear-gradient(135deg, #6366F1, #8B5CF6)' : ''">
          <span *ngIf="!enviandoIA">âœ¨ Solicitar Ayuda (IA)</span>
          <span *ngIf="enviandoIA">ðŸ§  Analizando...</span>
        </button>
      </div>
    </form>
  </div>
</div>